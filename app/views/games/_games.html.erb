
<table class='play'>
<% last_play_at = Time.local( 1999, 1, 1 )
   games.each do |game| %>
 
  <% unless last_play_at.year   == game.play_at.year  &&
            last_play_at.month  == game.play_at.month &&
            last_play_at.day    == game.play_at.day %>
    
    <% unless last_play_at.year == game.play_at.year %>
     <tr class='game-year'>
       <td colspan='2'></td>
       <td colspan='7'> <%= game.play_at.strftime('%Y') %></td>
     </tr>
    <% end %>

    <!-- todo: find a method for week number; do NOT use strftime; there must be something easier -->
    <% unless last_play_at.strftime('%V') == game.play_at.strftime('%V') %>
     <tr class='game-week'>
       <td colspan='2'></td>
       <td colspan='7'>Week <%= game.play_at.strftime('%V') %></td>
     </tr>
    <% end %>
        
    <tr class='game-day'>
      <td></td>
      <td colspan='8'><%= game.play_at.strftime('%A, %d. %B') %></td>
    </tr> 
        
  <% end %>
 
 
 <tr>
  <td class='game-hour'>
    <%= game.play_at.strftime('%H:%M') %>
  </td>
 
  <%= render_game_team1( game ) %>
  <%= render_game_score( game ) %>
  <%= render_game_team2( game ) %>

  <td class='game-round'>
    (<%= link_to game.round.event.title, event_path( game.round.event ) %> / <%= game.round.title %>)
  </td>
  
   
  <td class='game-debug'><!-- for debugging dates/time zones; show in UTC raw from db -->
    <%= game.play_at %>
  </td>
    
 </tr> 
<% last_play_at = game.play_at
   end %><!-- each game -->
</table>
